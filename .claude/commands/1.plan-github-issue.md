Please analyze and plan the implementation for the GitHub issue: $ARGUMENTS.

Follow these steps:

1. Use `gh issue view --comments` to get the issue details including discussion context
2. Understand the problem described in the issue
3. Search the codebase for relevant files
4. Plan the necessary changes to fix the issue
5. If the issue involves architectural decisions, prepare ADR content to include directly in the GitHub issue:
   - Title: 簡潔な意思決定の概要
   - Context: 背景情報と解決すべき問題
   - Decision: 選択したアプローチ
   - Consideration: 検討した他の選択肢
   - Consequences: 予期される影響
   - References: 関連するissue、PR、ドキュメント
6. **For new features, include a traceability document creation plan in the issue**:
   - Refer to `docs/guides/operations/TRACEABILITY_GUIDE.md` for detailed procedures
   - List all necessary documents following the 7-axis traceability framework:
     * BR (Business Requirements): `7-axis/1_BR/BR-{DOMAIN}-XXX.md`
     * UC (Use Cases): `7-axis/2_UC/UC-{DOMAIN}-XXX.md`
     * DM (Domain Model): `7-axis/3_DM/DM-{ModelName}.md`
     * SR (System Requirements):
       - Functional: `7-axis/4_SR/{ドメイン}/FR-{DOMAIN}-XXX.md`
       - Non-functional: `7-axis/4_NSR/{ドメイン}/NFR-{DOMAIN}-XXX.md`
     * EXT (External Integration): `7-axis/5_EXT/{System}/EXT-{SYSTEM}-XXX.md` (if needed)
     * API Design: `7-axis/6_API/{domain}/{api-name}.yaml`
     * TEST Design: `7-axis/7_TC/TS-{DOMAIN}-XXX.md`
   - Create traceability map entry: `docs/testing/traceability/{domain}_map.json`
   - **IMPORTANT: All new DocDD documents MUST include frontmatter with required fields**:
     * `title`: Document title (required)
     * `domain`: Domain name like monitoring, security, payment, etc. (required)
     * `category`: functional or non-functional (required)
     * `status`: draft, approved, or deprecated (required)
     * Additional fields as specified in `.claude/CLAUDE.md`
     * Pre-commit hooks will validate frontmatter - missing required fields will cause commit failures
   - Include document creation as tasks in the implementation schedule
   - Reference traceability chain in the issue (BR→UC→DM→SR/NSR→EXT→API→TC)
   - Add validation checkpoint: `python scripts/test/validate_traceability_map.py`
7. ALWAYS create a new issue as "<original issue title>[実装計画]" in Japanese and close the original issue $ARGUMENTS.
   - **For long implementation plans**: First write the content to `/tmp/issue_<issue_number>.md`, then use `gh issue create --body-file` to avoid shell escaping issues
   - Include ADR content directly in the issue description (not as a separate file)
   - Add appropriate labels based on the issue content (minimum 2 labels):
     * Priority labels (choose one):
       - High: 1～2営業日以内に対応すべき重要タスク
       - Medium: 通常の機能追加やバグ修正。計画的に対応
       - Low: 定期メンテ・将来的に対応で良い小変更
     * Content labels (choose one or more):
       - テスト: テストコードの追加・修正やカバレッジ改善に関するタスク
       - バックエンド: API やサーバーサイド実装・調整に関するタスク
       - フロントエンド: UI/UX 実装・修正やクライアントサイド開発に関するタスク
       - インフラ: インフラ基盤の構築・設定・運用に関するタスク
       - ドキュメント: ドキュメントの作成・更新・改善に関するタスク
       - バグ: 正常に動作していない不具合の修正に関するタスク
8. Implementation reference
   - frontend issues: review `docdd-starters/docs/frontend/README.md` and `docdd-starters/docs/frontend/akfm-knowledge/nextjs-basic-principle/`
   - frontend unit testing: follow `docdd-starters/docs/frontend/akfm-knowledge/articles/frontend-unit-testing.md`
   - backend issues: review `docdd-starters/docs/backend/ARCHITECTURE.md` and `docdd-starters/docs/backend/TESTING_GUIDE.md`
   - traceability validation: `docdd-starters/scripts/test/validate_traceability_map.py`

Remember to use the GitHub CLI (`gh`) for all GitHub-related tasks.
